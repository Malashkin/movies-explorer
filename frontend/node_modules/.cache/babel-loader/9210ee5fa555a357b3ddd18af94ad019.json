{"ast":null,"code":"import _slicedToArray from\"/Users/mike/Desktop/Code/Projects/Diploma/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Header from\"../Header/Header\";import{useState}from\"react\";import{CurrentUserContext}from\"../../contexts/CurrentUserContext\";import{useContext}from\"react\";import{NavLink}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var loggedIn=_ref.loggedIn,onSignOut=_ref.onSignOut,onProfileSubmit=_ref.onProfileSubmit,errorStatus=_ref.errorStatus,setErrorStatus=_ref.setErrorStatus,errorText=_ref.errorText,setSuccessStatus=_ref.setSuccessStatus;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPushed=_useState6[0],setIsPushed=_useState6[1];var currentUser=useContext(CurrentUserContext);var _useState7=useState({nameValidationMessage:\"\",isNameValid:false}),_useState8=_slicedToArray(_useState7,2),nameValidation=_useState8[0],setNameValidation=_useState8[1];var _useState9=useState({emailValidationMessage:\"\",isEmailValid:false}),_useState10=_slicedToArray(_useState9,2),emailValidation=_useState10[0],setEmailValidation=_useState10[1];var handelNameChange=function handelNameChange(e){setName(e.target.value);var validationMessage=e.target.validationMessage;setNameValidation({nameValidationMessage:validationMessage,isNameValid:e.target.validity.valid});setErrorStatus(false);};var handleEmailChange=function handleEmailChange(e){setEmail(e.target.value);var validationMessage=e.target.validationMessage;setEmailValidation({emailValidationMessage:validationMessage,isEmailValid:e.target.validity.valid});setErrorStatus(false);};function editButtonHandleClick(){setIsPushed(!isPushed);setSuccessStatus(false);}function handelFormSubmit(e){e.preventDefault();onProfileSubmit(name,email);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{loggedIn:loggedIn}),/*#__PURE__*/_jsxs(\"form\",{className:\"profile\",name:\"profile\",onSubmit:handelFormSubmit,noValidate:true,children:[/*#__PURE__*/_jsx(\"h2\",{className:\"profile__title\",children:\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \".concat(currentUser.name,\"!\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile__info-text\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__info-input\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"signform__field-input profile__info-input-text\",type:\"text\",value:name||\"\",placeholder:currentUser.name,name:\"profileName\",id:\"profile-name-input\",pattern:\"^[A-Za-z\\u0410-\\u042F\\u0430-\\u044F\\u0401\\u0451\\\\-\\\\s]+$\",onChange:handelNameChange,autoComplete:\"off\",noValidate:true,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"signform__field-error profile-email-input-error \".concat(!nameValidation.isNameValid?\"signform__input-error_active\":\"\"),children:nameValidation.nameValidationMessage})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"profile__info-text\",children:\"E-mail\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__info-input\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"signform__field-input profile__info-input-text\",type:\"email\",value:email||\"\",placeholder:currentUser.email,name:\"profileEmail\",id:\"profile-email-input\",pattern:\"[a-z0-9]+@[a-z]+\\\\.[a-z]{2,3}\",onChange:handleEmailChange,autoComplete:\"off\",noValidate:true,required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"signform__field-error profile-email-input-error \".concat(!emailValidation.isEmailValid?\"signform__input-error_active\":\"\"),children:emailValidation.emailValidationMessage})]})]}),errorStatus?/*#__PURE__*/_jsx(\"span\",{className:\"signform__server-error\",children:errorText}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"button\",{onClick:editButtonHandleClick,type:\"submit\",className:\"\\\"profile__btn profile__btn-edit \".concat(!nameValidation.isNameValid||!emailValidation.isEmailValid?\"profile__btn-disabled\":\"\"),disabled:name===currentUser.name&&email===currentUser.email&&isPushed?true:false,children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(NavLink,{type:\"button\",onClick:onSignOut,className:\"profile__btn profile__btn-out\",to:\"/sign-up\",children:\"\\u0412\\u044B\\u0439\\u0442\\u0438 \\u0438\\u0437 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"})]})]});};export default Profile;","map":{"version":3,"names":["Header","useState","CurrentUserContext","useContext","NavLink","Profile","loggedIn","onSignOut","onProfileSubmit","errorStatus","setErrorStatus","errorText","setSuccessStatus","name","setName","email","setEmail","isPushed","setIsPushed","currentUser","nameValidationMessage","isNameValid","nameValidation","setNameValidation","emailValidationMessage","isEmailValid","emailValidation","setEmailValidation","handelNameChange","e","target","value","validationMessage","validity","valid","handleEmailChange","editButtonHandleClick","handelFormSubmit","preventDefault"],"sources":["/Users/mike/Desktop/Code/Projects/Diploma/movies-explorer-frontend/src/components/Profile/Profile.js"],"sourcesContent":["import Header from \"../Header/Header\";\nimport { useState } from \"react\";\nimport { CurrentUserContext } from \"../../contexts/CurrentUserContext\";\nimport { useContext } from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nconst Profile = ({\n  loggedIn,\n  onSignOut,\n  onProfileSubmit,\n  errorStatus,\n  setErrorStatus,\n  errorText,\n  setSuccessStatus,\n}) => {\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [isPushed, setIsPushed] = useState(false);\n  const currentUser = useContext(CurrentUserContext);\n\n  const [nameValidation, setNameValidation] = useState({\n    nameValidationMessage: \"\",\n    isNameValid: false,\n  });\n  const [emailValidation, setEmailValidation] = useState({\n    emailValidationMessage: \"\",\n    isEmailValid: false,\n  });\n\n  const handelNameChange = (e) => {\n    setName(e.target.value);\n\n    const { validationMessage } = e.target;\n\n    setNameValidation({\n      nameValidationMessage: validationMessage,\n      isNameValid: e.target.validity.valid,\n    });\n    setErrorStatus(false);\n  };\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n\n    const { validationMessage } = e.target;\n\n    setEmailValidation({\n      emailValidationMessage: validationMessage,\n      isEmailValid: e.target.validity.valid,\n    });\n    setErrorStatus(false);\n  };\n\n  function editButtonHandleClick() {\n    setIsPushed(!isPushed);\n    setSuccessStatus(false);\n  }\n\n  function handelFormSubmit(e) {\n    e.preventDefault();\n    onProfileSubmit(name, email);\n  }\n\n  return (\n    <>\n      <Header loggedIn={loggedIn} />\n      <form\n        className=\"profile\"\n        name=\"profile\"\n        onSubmit={handelFormSubmit}\n        noValidate\n      >\n        <h2 className=\"profile__title\">{`Привет, ${currentUser.name}!`}</h2>\n        <div className=\"profile__info\">\n          <p className=\"profile__info-text\">Имя</p>\n          <div className=\"profile__info-input\">\n            <input\n              className=\"signform__field-input profile__info-input-text\"\n              type=\"text\"\n              value={name || \"\"}\n              placeholder={currentUser.name}\n              name=\"profileName\"\n              id=\"profile-name-input\"\n              pattern=\"^[A-Za-zА-Яа-яЁё\\-\\s]+$\"\n              onChange={handelNameChange}\n              autoComplete=\"off\"\n              noValidate\n              required\n            />\n            <span\n              className={`signform__field-error profile-email-input-error ${\n                !nameValidation.isNameValid\n                  ? \"signform__input-error_active\"\n                  : \"\"\n              }`}\n            >\n              {nameValidation.nameValidationMessage}\n            </span>\n          </div>\n        </div>\n        <div className=\"profile__info\">\n          <p className=\"profile__info-text\">E-mail</p>\n          <div className=\"profile__info-input\">\n            <input\n              className=\"signform__field-input profile__info-input-text\"\n              type=\"email\"\n              value={email || \"\"}\n              placeholder={currentUser.email}\n              name=\"profileEmail\"\n              id=\"profile-email-input\"\n              pattern=\"[a-z0-9]+@[a-z]+\\.[a-z]{2,3}\"\n              onChange={handleEmailChange}\n              autoComplete=\"off\"\n              noValidate\n              required\n            />\n            <span\n              className={`signform__field-error profile-email-input-error ${\n                !emailValidation.isEmailValid\n                  ? \"signform__input-error_active\"\n                  : \"\"\n              }`}\n            >\n              {emailValidation.emailValidationMessage}\n            </span>\n          </div>\n        </div>\n        {errorStatus ? (\n          <span className=\"signform__server-error\">{errorText}</span>\n        ) : (\n          <></>\n        )}\n        <button\n          onClick={editButtonHandleClick}\n          type=\"submit\"\n          className={`\"profile__btn profile__btn-edit ${\n            !nameValidation.isNameValid || !emailValidation.isEmailValid\n              ? \"profile__btn-disabled\"\n              : \"\"\n          }`}\n          disabled={\n            name === currentUser.name && email === currentUser.email && isPushed\n              ? true\n              : false\n          }\n        >\n          Редактировать\n        </button>\n        <NavLink\n          type=\"button\"\n          onClick={onSignOut}\n          className=\"profile__btn profile__btn-out\"\n          to=\"/sign-up\"\n        >\n          Выйти из аккаунта\n        </NavLink>\n      </form>\n    </>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}