{"ast":null,"code":"import _classCallCheck from\"/Users/mike/Desktop/Code/Projects/Diploma/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/mike/Desktop/Code/Projects/Diploma/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var MainApi=/*#__PURE__*/function(){function MainApi(_ref){var baseUrl=_ref.baseUrl;_classCallCheck(this,MainApi);this._baseUrl=baseUrl;}_createClass(MainApi,[{key:\"_checkResponse\",value:function _checkResponse(res){if(res.ok){return Promise.resolve(res.json());}return Promise.reject(res);}},{key:\"makeSignUp\",value:function makeSignUp(name,email,password){return fetch(\"\".concat(this._baseUrl,\"/signup\"),{method:\"POST\",credentials:\"include\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,email:email,password:password})}).then(this._checkResponse);}},{key:\"makeSignIn\",value:function makeSignIn(email,password){return fetch(\"\".concat(this._baseUrl,\"/signin\"),{method:\"POST\",credentials:\"include\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})}).then(this._checkResponse);}},{key:\"checkToken\",value:function checkToken(token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(this._checkResponse);}},{key:\"getUserInfo\",value:function getUserInfo(token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"GET\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(this._checkResponse);}},{key:\"updateUserInfo\",value:function updateUserInfo(name,email,token){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"PATCH\",credentials:\"include\",headers:{Authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,email:email})}).then(this._checkResponse);}},{key:\"createMovie\",value:function createMovie(movie,token){return fetch(\"\".concat(this._baseUrl,\"/movies\"),{method:\"POST\",headers:{authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\",Accept:\"application/json\"},body:JSON.stringify({country:movie.country||\"unknown\",director:movie.director,duration:movie.duration,year:movie.year,description:movie.description,image:\"https://api.nomoreparties.co\".concat(movie.image.url),trailerLink:movie.trailerLink,thumbnail:\"https://api.nomoreparties.co\".concat(movie.image.formats.thumbnail.url),movieId:movie.id,nameRU:movie.nameRU,nameEN:movie.nameEN||\"unknown\"})}).then(this._checkResponse);}},{key:\"deleteMovie\",value:function deleteMovie(movieId,token){return fetch(\"\".concat(this._baseUrl,\"/movies/\").concat(movieId),{method:\"DELETE\",credentials:\"include\",headers:{Authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}}).then(this._checkResponse);}},{key:\"getSavedMovies\",value:function getSavedMovies(token){return fetch(\"\".concat(this._baseUrl,\"/movies\"),{headers:{Authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\"}}).then(this._checkResponse);}}]);return MainApi;}();/* const mainApi = new MainApi({\n  baseUrl: \"http://localhost:3001\",\n}); */var mainApi=new MainApi({baseUrl:\"https://api.diploma.nomoredomains.sbs\"});export default mainApi;","map":{"version":3,"names":["MainApi","baseUrl","_baseUrl","res","ok","Promise","resolve","json","reject","name","email","password","fetch","method","credentials","headers","Accept","body","JSON","stringify","then","_checkResponse","token","Authorization","movie","authorization","country","director","duration","year","description","image","url","trailerLink","thumbnail","formats","movieId","id","nameRU","nameEN","mainApi"],"sources":["/Users/mike/Desktop/Code/Projects/Diploma/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["class MainApi {\n  constructor({ baseUrl }) {\n    this._baseUrl = baseUrl;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return Promise.resolve(res.json());\n    }\n    return Promise.reject(res);\n  }\n\n  makeSignUp(name, email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ name, email, password }),\n    }).then(this._checkResponse);\n  }\n\n  makeSignIn(email, password) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ email, password }),\n    }).then(this._checkResponse);\n  }\n\n  checkToken(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    }).then(this._checkResponse);\n  }\n\n  getUserInfo(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    }).then(this._checkResponse);\n  }\n\n  updateUserInfo(name, email, token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      credentials: \"include\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ name, email }),\n    }).then(this._checkResponse);\n  }\n\n  createMovie(movie, token) {\n    return fetch(`${this._baseUrl}/movies`, {\n      method: \"POST\",\n      headers: {\n        authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n      body: JSON.stringify({\n        country: movie.country || \"unknown\",\n        director: movie.director,\n        duration: movie.duration,\n        year: movie.year,\n        description: movie.description,\n        image: `https://api.nomoreparties.co${movie.image.url}`,\n        trailerLink: movie.trailerLink,\n        thumbnail: `https://api.nomoreparties.co${movie.image.formats.thumbnail.url}`,\n        movieId: movie.id,\n        nameRU: movie.nameRU,\n        nameEN: movie.nameEN || \"unknown\",\n      }),\n    }).then(this._checkResponse);\n  }\n\n  deleteMovie(movieId, token) {\n    return fetch(`${this._baseUrl}/movies/${movieId}`, {\n      method: \"DELETE\",\n      credentials: \"include\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n      },\n    }).then(this._checkResponse);\n  }\n\n  getSavedMovies(token) {\n    return fetch(`${this._baseUrl}/movies`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n      },\n    }).then(this._checkResponse);\n  }\n}\n\n/* const mainApi = new MainApi({\n  baseUrl: \"http://localhost:3001\",\n}); */\n\nconst mainApi = new MainApi({\n  baseUrl: \"https://api.diploma.nomoredomains.sbs\",\n});\n\nexport default mainApi;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}