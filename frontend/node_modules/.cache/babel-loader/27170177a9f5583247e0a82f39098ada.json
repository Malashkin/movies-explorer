{"ast":null,"code":"class MainApi {\n  constructor(_ref) {\n    let {\n      baseUrl,\n      contentType\n    } = _ref;\n    this._baseUrl = baseUrl;\n    this._contextType = contentType;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return Promise.resolve(res.json());\n    }\n\n    return Promise.reject(res);\n  }\n\n  makeSignUp(name, email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      })\n    }).then(response => {\n      return response.json();\n    }).then(res => {\n      return res;\n    }).catch(err => console.log(err));\n  }\n\n  makeSignIn(email, password, token) {\n    return fetch(this._baseUrl + \"/signin\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(response => {\n      return response.json();\n    }).then(res => {\n      return res;\n    }).catch(err => console.log(err));\n  }\n\n  makeSignOut() {\n    return fetch(this._baseUrl + \"/signout\", {\n      method: \"POST\",\n      credentials: \"include\"\n    }).then(this._checkResponse);\n  }\n\n  getUserInfo() {\n    return fetch(this._baseUrl + \"/users/me\", {\n      credentials: \"include\",\n      cache: \"no-cache\",\n      headers: {\n        ContentType: this._contentType\n      }\n    });\n  }\n\n  updateUserInfo(email, password) {\n    return fetch(this._baseUrl + \"/users/me\", {\n      method: \"PATCH\",\n      credentials: \"include\",\n      headers: {\n        ContentType: this._contentType\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(this._checkResponse);\n  }\n\n}\n\nexport const checkToken = token => {\n  return fetch(`${this._baseUrl}/users/me`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    }\n  }).then(res => res.json()).then(data => data);\n};\nconst mainApi = new MainApi({\n  baseUrl: \"http://localhost:3001\",\n  contentType: \"application/json\"\n});\nexport default mainApi;","map":{"version":3,"names":["MainApi","constructor","baseUrl","contentType","_baseUrl","_contextType","_checkResponse","res","ok","Promise","resolve","json","reject","makeSignUp","name","email","password","fetch","method","headers","Accept","body","JSON","stringify","then","response","catch","err","console","log","makeSignIn","token","Authorization","makeSignOut","credentials","getUserInfo","cache","ContentType","_contentType","updateUserInfo","checkToken","data","mainApi"],"sources":["/Users/mike/Desktop/Code/Projects/Diploma/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["class MainApi {\n  constructor({ baseUrl, contentType }) {\n    this._baseUrl = baseUrl;\n    this._contextType = contentType;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return Promise.resolve(res.json());\n    }\n    return Promise.reject(res);\n  }\n  makeSignUp(name, email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ name, email, password }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((res) => {\n        return res;\n      })\n      .catch((err) => console.log(err));\n  }\n\n  makeSignIn(email, password, token) {\n    return fetch(this._baseUrl + \"/signin\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify({ email, password }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((res) => {\n        return res;\n      })\n      .catch((err) => console.log(err));\n  }\n\n  makeSignOut() {\n    return fetch(this._baseUrl + \"/signout\", {\n      method: \"POST\",\n      credentials: \"include\",\n    }).then(this._checkResponse);\n  }\n\n  getUserInfo() {\n    return fetch(this._baseUrl + \"/users/me\", {\n      credentials: \"include\",\n      cache: \"no-cache\",\n      headers: {\n        ContentType: this._contentType,\n      },\n    });\n  }\n  updateUserInfo(email, password) {\n    return fetch(this._baseUrl + \"/users/me\", {\n      method: \"PATCH\",\n      credentials: \"include\",\n      headers: {\n        ContentType: this._contentType,\n      },\n      body: JSON.stringify({ email, password }),\n    }).then(this._checkResponse);\n  }\n}\n\nexport const checkToken = (token) => {\n  return fetch(`${this._baseUrl}/users/me`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => data);\n};\n\nconst mainApi = new MainApi({\n  baseUrl: \"http://localhost:3001\",\n  contentType: \"application/json\",\n});\n\nexport default mainApi;\n"],"mappings":"AAAA,MAAMA,OAAN,CAAc;EACZC,WAAW,OAA2B;IAAA,IAA1B;MAAEC,OAAF;MAAWC;IAAX,CAA0B;IACpC,KAAKC,QAAL,GAAgBF,OAAhB;IACA,KAAKG,YAAL,GAAoBF,WAApB;EACD;;EAEDG,cAAc,CAACC,GAAD,EAAM;IAClB,IAAIA,GAAG,CAACC,EAAR,EAAY;MACV,OAAOC,OAAO,CAACC,OAAR,CAAgBH,GAAG,CAACI,IAAJ,EAAhB,CAAP;IACD;;IACD,OAAOF,OAAO,CAACG,MAAR,CAAeL,GAAf,CAAP;EACD;;EACDM,UAAU,CAACC,IAAD,EAAOC,KAAP,EAAcC,QAAd,EAAwB;IAChC,OAAOC,KAAK,CAAE,GAAE,KAAKb,QAAS,SAAlB,EAA4B;MACtCc,MAAM,EAAE,MAD8B;MAEtCC,OAAO,EAAE;QACPC,MAAM,EAAE,kBADD;QAEP,gBAAgB;MAFT,CAF6B;MAMtCC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAAET,IAAF;QAAQC,KAAR;QAAeC;MAAf,CAAf;IANgC,CAA5B,CAAL,CAQJQ,IARI,CAQEC,QAAD,IAAc;MAClB,OAAOA,QAAQ,CAACd,IAAT,EAAP;IACD,CAVI,EAWJa,IAXI,CAWEjB,GAAD,IAAS;MACb,OAAOA,GAAP;IACD,CAbI,EAcJmB,KAdI,CAcGC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAdX,CAAP;EAeD;;EAEDG,UAAU,CAACf,KAAD,EAAQC,QAAR,EAAkBe,KAAlB,EAAyB;IACjC,OAAOd,KAAK,CAAC,KAAKb,QAAL,GAAgB,SAAjB,EAA4B;MACtCc,MAAM,EAAE,MAD8B;MAEtCC,OAAO,EAAE;QACPC,MAAM,EAAE,kBADD;QAEP,gBAAgB,kBAFT;QAGPY,aAAa,EAAG,UAASD,KAAM;MAHxB,CAF6B;MAOtCV,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAAER,KAAF;QAASC;MAAT,CAAf;IAPgC,CAA5B,CAAL,CASJQ,IATI,CASEC,QAAD,IAAc;MAClB,OAAOA,QAAQ,CAACd,IAAT,EAAP;IACD,CAXI,EAYJa,IAZI,CAYEjB,GAAD,IAAS;MACb,OAAOA,GAAP;IACD,CAdI,EAeJmB,KAfI,CAeGC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAfX,CAAP;EAgBD;;EAEDM,WAAW,GAAG;IACZ,OAAOhB,KAAK,CAAC,KAAKb,QAAL,GAAgB,UAAjB,EAA6B;MACvCc,MAAM,EAAE,MAD+B;MAEvCgB,WAAW,EAAE;IAF0B,CAA7B,CAAL,CAGJV,IAHI,CAGC,KAAKlB,cAHN,CAAP;EAID;;EAED6B,WAAW,GAAG;IACZ,OAAOlB,KAAK,CAAC,KAAKb,QAAL,GAAgB,WAAjB,EAA8B;MACxC8B,WAAW,EAAE,SAD2B;MAExCE,KAAK,EAAE,UAFiC;MAGxCjB,OAAO,EAAE;QACPkB,WAAW,EAAE,KAAKC;MADX;IAH+B,CAA9B,CAAZ;EAOD;;EACDC,cAAc,CAACxB,KAAD,EAAQC,QAAR,EAAkB;IAC9B,OAAOC,KAAK,CAAC,KAAKb,QAAL,GAAgB,WAAjB,EAA8B;MACxCc,MAAM,EAAE,OADgC;MAExCgB,WAAW,EAAE,SAF2B;MAGxCf,OAAO,EAAE;QACPkB,WAAW,EAAE,KAAKC;MADX,CAH+B;MAMxCjB,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;QAAER,KAAF;QAASC;MAAT,CAAf;IANkC,CAA9B,CAAL,CAOJQ,IAPI,CAOC,KAAKlB,cAPN,CAAP;EAQD;;AA1EW;;AA6Ed,OAAO,MAAMkC,UAAU,GAAIT,KAAD,IAAW;EACnC,OAAOd,KAAK,CAAE,GAAE,KAAKb,QAAS,WAAlB,EAA8B;IACxCc,MAAM,EAAE,KADgC;IAExCC,OAAO,EAAE;MACP,gBAAgB,kBADT;MAEPa,aAAa,EAAG,UAASD,KAAM;IAFxB;EAF+B,CAA9B,CAAL,CAOJP,IAPI,CAOEjB,GAAD,IAASA,GAAG,CAACI,IAAJ,EAPV,EAQJa,IARI,CAQEiB,IAAD,IAAUA,IARX,CAAP;AASD,CAVM;AAYP,MAAMC,OAAO,GAAG,IAAI1C,OAAJ,CAAY;EAC1BE,OAAO,EAAE,uBADiB;EAE1BC,WAAW,EAAE;AAFa,CAAZ,CAAhB;AAKA,eAAeuC,OAAf"},"metadata":{},"sourceType":"module"}