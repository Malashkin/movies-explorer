{"ast":null,"code":"import _slicedToArray from\"/Users/mike/Desktop/Code/Projects/Diploma/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{useLocation}from\"react-router\";import SearchForm from\"../Movies/SearchForm/SearchForm\";import Header from\"../Header/Header\";import Footer from\"../Footer/Footer\";import MoviesCardList from\"../Movies/MoviesCardList/MoviesCardList\";import mainApi from\"../../utils/MainApi\";import{filterMovies,filterCheckedMovies}from\"../../utils/moviesFilter\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var token=localStorage.getItem(\"token\");var SavedMovies=function SavedMovies(_ref){var onLoading=_ref.onLoading,isSubmitting=_ref.isSubmitting,loggedIn=_ref.loggedIn;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),savedMovies=_useState2[0],setSavedMovies=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),sortedSavedMovies=_useState4[0],setSortedSavedMovies=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isCheckedSavedMovies=_useState6[0],setIsCheckedSavedMovies=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isThereSortedSavedMovies=_useState8[0],setIsThereSortedSavedMovies=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),savedMoviesSearchText=_useState10[0],setSavedMoviesSearchText=_useState10[1];var location=useLocation();useEffect(function(){if(loggedIn){Promise.all([mainApi.getSavedMovies(token)]).then(function(data){var _data=_slicedToArray(data,1),savedMovies=_data[0];setIsThereSortedSavedMovies(true);setSavedMovies(savedMovies.movies);}).catch(function(err){console.log(err);});}},[loggedIn]);useEffect(function(){if(isCheckedSavedMovies){var filteredCheckedSavedMovies=filterCheckedMovies(savedMovies,savedMoviesSearchText);if(filteredCheckedSavedMovies.length!==0){setSortedSavedMovies(filteredCheckedSavedMovies);}else{setSortedSavedMovies(filteredCheckedSavedMovies);setIsThereSortedSavedMovies(false);}}else{var filteredSavedMovies=filterMovies(savedMovies,savedMoviesSearchText);if(filteredSavedMovies.length!==0){setSortedSavedMovies(filteredSavedMovies);}else{setSortedSavedMovies(filteredSavedMovies);setIsThereSortedSavedMovies(false);}}},[isCheckedSavedMovies,savedMovies,savedMoviesSearchText]);useEffect(function(){setSortedSavedMovies(savedMovies);setIsCheckedSavedMovies(false);setSavedMoviesSearchText(\"\");},[location.pathname,savedMovies]);function handleCheckboxBtnClicked(){setIsCheckedSavedMovies(!isCheckedSavedMovies);}function handleDeleteMovie(movieId){mainApi.deleteMovie(movieId,token).then(function(){setSavedMovies(function(state){return state.filter(function(movie){return movie._id!==movieId;});});});}return/*#__PURE__*/_jsxs(\"div\",{className:\"movies\",children:[/*#__PURE__*/_jsx(Header,{loggedIn:loggedIn}),/*#__PURE__*/_jsx(SearchForm,{setSavedMoviesSearchText:setSavedMoviesSearchText,onLoading:onLoading,onChecked:setSavedMoviesSearchText,onCheckedSavedMovies:handleCheckboxBtnClicked,isCheckedSavedMovies:isCheckedSavedMovies}),/*#__PURE__*/_jsx(MoviesCardList,{movies:sortedSavedMovies,onDeleteMovie:handleDeleteMovie,savedMovies:savedMovies,isThereSortedSavedMovies:isThereSortedSavedMovies,isSubmitting:isSubmitting}),/*#__PURE__*/_jsx(Footer,{})]});};export default SavedMovies;","map":{"version":3,"names":["useState","useEffect","useLocation","SearchForm","Header","Footer","MoviesCardList","mainApi","filterMovies","filterCheckedMovies","token","localStorage","getItem","SavedMovies","onLoading","isSubmitting","loggedIn","savedMovies","setSavedMovies","sortedSavedMovies","setSortedSavedMovies","isCheckedSavedMovies","setIsCheckedSavedMovies","isThereSortedSavedMovies","setIsThereSortedSavedMovies","savedMoviesSearchText","setSavedMoviesSearchText","location","Promise","all","getSavedMovies","then","data","movies","catch","err","console","log","filteredCheckedSavedMovies","length","filteredSavedMovies","pathname","handleCheckboxBtnClicked","handleDeleteMovie","movieId","deleteMovie","state","filter","movie","_id"],"sources":["/Users/mike/Desktop/Code/Projects/Diploma/movies-explorer-frontend/src/components/SavedMovies/SavedMovies.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router\";\nimport SearchForm from \"../Movies/SearchForm/SearchForm\";\nimport Header from \"../Header/Header\";\nimport Footer from \"../Footer/Footer\";\nimport MoviesCardList from \"../Movies/MoviesCardList/MoviesCardList\";\nimport mainApi from \"../../utils/MainApi\";\nimport { filterMovies, filterCheckedMovies } from \"../../utils/moviesFilter\";\n\nconst token = localStorage.getItem(\"token\");\n\nconst SavedMovies = ({ onLoading, isSubmitting, loggedIn }) => {\n  const [savedMovies, setSavedMovies] = useState([]);\n  const [sortedSavedMovies, setSortedSavedMovies] = useState([]);\n  const [isCheckedSavedMovies, setIsCheckedSavedMovies] = useState(false);\n  const [isThereSortedSavedMovies, setIsThereSortedSavedMovies] =\n    useState(true);\n  const [savedMoviesSearchText, setSavedMoviesSearchText] = useState(\"\");\n  const location = useLocation();\n\n  useEffect(() => {\n    if (loggedIn) {\n      Promise.all([mainApi.getSavedMovies(token)])\n        .then((data) => {\n          const [savedMovies] = data;\n          setIsThereSortedSavedMovies(true);\n          setSavedMovies(savedMovies.movies);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [loggedIn]);\n\n  useEffect(() => {\n    if (isCheckedSavedMovies) {\n      const filteredCheckedSavedMovies = filterCheckedMovies(\n        savedMovies,\n        savedMoviesSearchText\n      );\n      if (filteredCheckedSavedMovies.length !== 0) {\n        setSortedSavedMovies(filteredCheckedSavedMovies);\n      } else {\n        setSortedSavedMovies(filteredCheckedSavedMovies);\n        setIsThereSortedSavedMovies(false);\n      }\n    } else {\n      const filteredSavedMovies = filterMovies(\n        savedMovies,\n        savedMoviesSearchText\n      );\n      if (filteredSavedMovies.length !== 0) {\n        setSortedSavedMovies(filteredSavedMovies);\n      } else {\n        setSortedSavedMovies(filteredSavedMovies);\n        setIsThereSortedSavedMovies(false);\n      }\n    }\n  }, [isCheckedSavedMovies, savedMovies, savedMoviesSearchText]);\n\n  useEffect(() => {\n    setSortedSavedMovies(savedMovies);\n    setIsCheckedSavedMovies(false);\n    setSavedMoviesSearchText(\"\");\n  }, [location.pathname, savedMovies]);\n\n  function handleCheckboxBtnClicked() {\n    setIsCheckedSavedMovies(!isCheckedSavedMovies);\n  }\n\n  function handleDeleteMovie(movieId) {\n    mainApi.deleteMovie(movieId, token).then(() => {\n      setSavedMovies((state) => state.filter((movie) => movie._id !== movieId));\n    });\n  }\n\n  return (\n    <div className=\"movies\">\n      <Header loggedIn={loggedIn} />\n      <SearchForm\n        setSavedMoviesSearchText={setSavedMoviesSearchText}\n        onLoading={onLoading}\n        onChecked={setSavedMoviesSearchText}\n        onCheckedSavedMovies={handleCheckboxBtnClicked}\n        isCheckedSavedMovies={isCheckedSavedMovies}\n      />\n      <MoviesCardList\n        movies={sortedSavedMovies}\n        onDeleteMovie={handleDeleteMovie}\n        savedMovies={savedMovies}\n        isThereSortedSavedMovies={isThereSortedSavedMovies}\n        isSubmitting={isSubmitting}\n      />\n      <Footer />\n    </div>\n  );\n};\n\nexport default SavedMovies;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}